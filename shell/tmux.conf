##################################################
# Prefix
##################################################
unbind C-b
set  -g prefix C-z
bind C-z send-prefix

##################################################
# Enable mouse
##################################################
set  -g mouse on
bind -n WheelUpPane if-shell -Ft= "#{?pane_in_mode,1,#{alternate_on}}" "send-keys -M" "copy-mode"

##################################################
# View setting
##################################################
set  -g status-interval 5

# Enable visual notification
setw -g monitor-activity on
set  -g visual-activity on

# Setting for status bar
setw -g allow-rename off
set  -g status-bg black
set  -g status-fg white
set  -g status-attr bold
setw -g mode-bg white
setw -g mode-fg black
setw -g window-status-fg cyan
setw -g window-status-bg default
setw -g window-status-attr dim
setw -g window-status-current-fg white
setw -g window-status-current-bg red
setw -g window-status-current-attr bright

# Setting for left panel
set -g status-left-length 50
set -g status-left \
"#{?client_prefix,#[reverse],}#[fg=green][#S:#I.#P]#[fg=yellow][#(whoami)@#h]  "

# Setting for right panel
set -g status-right-length 90
set -g status-right \
"#{?client_prefix,#[reverse],}"\
"#[fg=green]#(${HOME}/dot_files/bin/git-echo-branch-tmux-current-pane)"\
"#[fg=cyan][%Y-%m-%d(%a) %H:%M]"

# Other settings
set -g message-fg white
set -g message-bg red
set -g message-attr bright

set -g pane-border-fg green
set -g pane-border-bg black
set -g pane-active-border-fg white
set -g pane-active-border-bg yellow

set -g renumber-windows on

# pane operation
bind -n C-t last-pane
bind k kill-pane

# window operation
bind Space last-window
bind K kill-window

# reload config
bind r source-file ~/.tmux.conf \; display "Reloaded!"

##################################################
# Default shell
##################################################
if-shell 'which /usr/bin/fish' \
  'set -g default-shell "/usr/bin/fish"'


##################################################
# Tmux plugin manager
#   Install and load tmux plugins
#
### Keybindings ###
# <prefix> Shift+i  Install new plugin
# <prefix> Shift+u  Update plugins
# <prefix> Alt+u    Remove/uninstall plugin not on the list
##################################################
set -g @plugin 'tmux-plugins/tpm'


##################################################
# Tmux-yank
#   Copy to the system clipboard
#
### Keybindings ###
# Normal mode:
# <prefix> y       Copy text from the command line to the clipboard
# <prefix> Shift+y Copy the current pane's current working directory
#                  to the clipboard
# Copy mode:
#   y        Copy selection to the clipboard
#   Shift+y  Copy selection and paste it to the command line
##################################################
set -g @plugin 'tmux-plugins/tmux-yank'


##################################################
# Tmux copycat
#   Enable regex search, search result highlight and predifined searches
#
### Keybindings ###
# <prefix> /    Regex search
# <prefix> Ctrl+f  Simple file search
# <prefix> Ctrl+g  Jump over git status files (use after git status)
# <prefix> Alt+h   Jump over SHA-1 hashes (use after git log)
# <prefix> Ctrl+u  URL search
# <prefix> Ctrl+d  Number search
# <prefix> Alt+i   IP address search
# In copycat mode:
#   n             Jump to the next match
#   N             Jump to the previous match
# Ctrl+w / Alt+w  Copy highlighted match (emacs mode)
# Enter           Copy highlighted match (vi mode)
##################################################
set -g @plugin 'tmux-plugins/tmux-copycat'


##################################################
# Tmux open
#   Open highlighted selection directly from Tmux copy mode
#
### Keybindings ###
# In copy mode:
#   o        Open a highlighted selection with the default program
#   Ctrl+o   Open a highlighted selection with the $EDITOR
#   Shift+s  Google the hightlighted selection direclty
##################################################
set -g @plugin 'tmux-plugins/tmux-open'


##################################################
# Tmux Resurrect
#   Restore tmux environment after system restart
#
### Keybindings ###
# <prefix> C-s  save
# <prefix> C-r  restore
##################################################
set -g @plugin 'tmux-plugins/tmux-resurrect'


##################################################
# Tmux-continuum
#   Automatic restore when tmux is started
#   Depends on tmux-ressurrct plugin
##################################################
set -g @plugin 'tmux-plugins/tmux-continuum'


##################################################
# Tmux sensible
#   A set of tmux options that should be accepetable to everyone.
#   Please refer the following README:
#     https://github.com/tmux-plugins/tmux-sensible
##################################################
set -g @plugin 'tmux-plugins/tmux-sensible'


##################################################
# Tmux Pain Control
#   Add standard navigation bindings.
#
### Navigation ###
# <prefix> h / <prefix> C-h  Select pane on the left
# <prefix> j / <prefix> C-j  Select pane below
# <prefix> k / <prefix> C-k  Select pane above
# <prefix> l / <prefix> C-l  Select pane on the right
#
### Resizing panes ###
# <prefix> Shift+h  Resize 5 cells to the left
# <prefix> Shift+j  Resize 5 cells in the down
# <prefix> Shift+k  Resize 5 cells in the up
# <prefix> Shift+l  Resize 5 cells to the right
#
### Splitting panes ###
# <prefix> |  Split current pane horizontally
# <prefix> -  Split current pane vertically
# <prefix> \  Split current pane full width horizontally
# <prefix> _  Split current pane full width vertically
#
### Swapping windows ###
# <prefix> <  Move current window one position to the left
# <prefix> >  Move current window one position to the right
##################################################
set -g @plugin 'tmux-plugins/tmux-pain-control'


run '~/.tmux/plugins/tpm/tpm'
